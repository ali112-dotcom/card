<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Al-A'raf Mission - Premium Contact</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-navy: #1a2a3a;
            --accent-gold: #d4af37;
            --glass-border: rgba(255, 255, 255, 0.6);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; user-select: none; }

        body {
            font-family: 'Lato', sans-serif;
            background: radial-gradient(circle at center, #e2eeee, #ffffff);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            perspective: 1200px;
        }

        /* --- THE CARD CONTAINER --- */
        .scene {
            width: 90%;
            max-width: 360px;
            height: 520px;
            position: relative;
            z-index: 10;
            cursor: grab;
        }
        .scene:active { cursor: grabbing; }

        /* The Moving Object */
        .card-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            /* Transition set to none by default to allow physics engine to work */
            transition: none; 
        }

        /* Flip State */
        .card-wrapper.is-flipped {
            transform: rotateY(180deg) !important;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1) !important;
        }

        /* --- FRONT & BACK FACES --- */
        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            padding: 30px 25px;
            background: rgba(202, 224, 226, 0.85);
            border: 1px solid var(--glass-border);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .face-front { z-index: 2; }

        .face-back {
            transform: rotateY(180deg);
            justify-content: center;
            background: linear-gradient(135deg, #1a2a3a 0%, #2c3e50 100%);
            color: white;
        }

        /* --- DYNAMIC GLARE LAYER --- */
        .glare {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 20px;
            background: radial-gradient(
                circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
                rgba(255,255,255,0.7) 0%, 
                rgba(255,255,255,0) 50%
            );
            opacity: 0.6;
            pointer-events: none;
            mix-blend-mode: overlay;
            z-index: 10;
        }

        /* --- CONTENT STYLING --- */
        .logo-box {
            width: 70px; height: 70px;
            background: var(--primary-navy);
            color: var(--accent-gold);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px;
            border: 3px solid #fff;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            transform: translateZ(20px);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            color: var(--primary-navy);
            font-size: 24px;
            margin-bottom: 5px;
            transform: translateZ(15px);
        }

        p.desc {
            color: #555;
            font-size: 12px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
            transform: translateZ(15px);
        }

        /* Buttons */
        .btn-container {
            width: 100%;
            display: flex; flex-direction: column; gap: 10px;
            transform: translateZ(30px);
        }

        .btn {
            display: flex; align-items: center; justify-content: center;
            padding: 12px;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 700; font-size: 14px;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.95); }

        .btn-exec { background: #2980b9; }
        .btn-admin { background: #16a085; }
        .btn-wa { background: #25d366; }
        .btn-flip { 
            background: transparent; 
            border: 2px solid var(--primary-navy); 
            color: var(--primary-navy); 
            margin-top: 5px;
        }

        /* Back Side Styling */
        .qr-placeholder {
            width: 150px; height: 150px;
            background: white;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            transform: translateZ(30px);
        }
        .qr-placeholder img { width: 100%; height: 100%; }
        
        .back-title { font-size: 20px; margin-bottom: 20px; color: var(--accent-gold); transform: translateZ(20px);}
        
        .btn-back-action {
            width: 80%;
            padding: 12px;
            background: var(--accent-gold);
            color: var(--primary-navy);
            border-radius: 25px;
            text-align: center;
            text-decoration: none;
            font-weight: bold;
            margin-bottom: 15px;
            transform: translateZ(30px);
        }
        .btn-return {
            color: rgba(255,255,255,0.6);
            cursor: pointer;
            margin-top: 20px;
            font-size: 24px;
        }

        /* Particles Background */
        .particles { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 0; }
        .particle { position: absolute; background: rgba(0,0,0,0.03); border-radius: 50%; animation: float 20s infinite linear; }
        @keyframes float { 0% { transform: translateY(100vh); } 100% { transform: translateY(-100px); } }

    </style>
</head>
<body>

    <div class="particles">
        <div class="particle" style="width: 50px; height: 50px; left: 10%; animation-duration: 25s;"></div>
        <div class="particle" style="width: 30px; height: 30px; left: 80%; animation-duration: 18s;"></div>
    </div>

    <div class="scene" id="scene">
        <div class="card-wrapper" id="cardWrapper">
            
            <div class="face face-front">
                <div class="glare" id="glare"></div>

                <div class="logo-box">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>

                <h1>Al-A'raf Mission</h1>
                <p class="desc">Excellence in Residential Education</p>

                <div class="btn-container">
                    <a href="tel:+919735664089" class="btn btn-exec" onclick="vibrate()">
                        <i class="fa-solid fa-phone" style="margin-right:8px;"></i> Executive
                    </a>
                    <a href="tel:+919547759837" class="btn btn-admin" onclick="vibrate()">
                        <i class="fa-solid fa-user-tie" style="margin-right:8px;"></i> Admin
                    </a>
                    <a href="https://wa.me/919547759837" class="btn btn-wa" onclick="vibrate()">
                        <i class="fa-brands fa-whatsapp" style="margin-right:8px;"></i> WhatsApp
                    </a>
                    
                    <button class="btn btn-flip" id="flipBtn" onclick="vibrate()">
                        <i class="fa-solid fa-qrcode" style="margin-right:8px;"></i> Scan & Map
                    </button>
                </div>
            </div>

            <div class="face face-back">
                <h2 class="back-title">Scan to Save</h2>
                
                <div class="qr-placeholder">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=BEGIN%3AVCARD%0AVERSION%3A3.0%0AN%3AMission%3BAl-Araf%0ATEL%3A9547759837%0AEND%3AVCARD" alt="QR Code">
                </div>

                <a href="https://maps.google.com/?q=Al-Araf+Mission" target="_blank" class="btn-back-action" onclick="vibrate()">
                    <i class="fa-solid fa-location-dot"></i> Locate on Map
                </a>

                <div class="btn-return" id="returnBtn" onclick="vibrate()">
                    <i class="fa-solid fa-rotate-left"></i>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- VARIABLES ---
        const scene = document.getElementById('scene');
        const cardWrapper = document.getElementById('cardWrapper');
        const glare = document.getElementById('glare');
        const flipBtn = document.getElementById('flipBtn');
        const returnBtn = document.getElementById('returnBtn');

        let isFlipped = false;
        let isDragging = false;
        let startX, startY;
        let currentX = 0, currentY = 0;
        let velX = 0, velY = 0;

        // Auto-Spin Variables
        let isAutoSpinning = false;
        let spinStartTime = 0;
        let spinStartAngle = 0;
        const spinDuration = 2500; // 2.5 seconds for 2 spins

        // --- 1. FLIP LOGIC ---
        function toggleFlip(e) {
            e.stopPropagation();
            isFlipped = !isFlipped;
            if(isFlipped) {
                cardWrapper.classList.add('is-flipped');
                isAutoSpinning = false; // Stop spinning if we flip
                // Reset physics for clean state
                currentX = 0; currentY = 0; velX = 0; velY = 0;
                cardWrapper.style.transform = `rotateY(180deg)`; 
            } else {
                cardWrapper.classList.remove('is-flipped');
                cardWrapper.style.transform = `rotateY(0deg)`;
            }
        }

        flipBtn.addEventListener('click', toggleFlip);
        returnBtn.addEventListener('click', toggleFlip);

        // --- 2. HAPTICS ---
        function vibrate() {
            if (navigator.vibrate) navigator.vibrate(15);
        }

        // --- 3. AUTO SPIN LOGIC ---
        function easeInOutCubic(t) {
            return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
        }

        function triggerSpin() {
            // Don't spin if user is interacting, or if card is flipped to back
            if (isDragging || isFlipped) return;

            isAutoSpinning = true;
            spinStartTime = performance.now();
            spinStartAngle = currentX; // Start from wherever the card currently is
            
            // Kill existing momentum so it doesn't drift after spin
            velX = 0; 
            velY = 0;
        }

        // --- 4. GLARE & INPUT HANDLING ---
        function updateGlare(x, y) {
            const rect = scene.getBoundingClientRect();
            const percentX = ((x - rect.left) / rect.width) * 100;
            const percentY = ((y - rect.top) / rect.height) * 100;
            glare.style.setProperty('--mouse-x', `${percentX}%`);
            glare.style.setProperty('--mouse-y', `${percentY}%`);
        }

        function handleStart(x, y) {
            if(isFlipped) return;
            isDragging = true;
            isAutoSpinning = false; // User touch cancels auto spin
            startX = x; startY = y;
            scene.style.cursor = "grabbing";
        }

        function handleMove(x, y) {
            if (!isDragging || isFlipped) return;
            const deltaX = x - startX;
            const deltaY = y - startY;
            
            currentX += deltaX * 0.4;
            currentY -= deltaY * 0.4;
            
            velX = deltaX * 0.4;
            velY = -(deltaY * 0.4);
            
            startX = x; startY = y;
            updateGlare(x, y);
        }

        function handleEnd() {
            isDragging = false;
            scene.style.cursor = "grab";
        }

        // Events
        scene.addEventListener('mousedown', e => handleStart(e.clientX, e.clientY));
        document.addEventListener('mousemove', e => {
            updateGlare(e.clientX, e.clientY);
            handleMove(e.clientX, e.clientY);
        });
        document.addEventListener('mouseup', handleEnd);

        scene.addEventListener('touchstart', e => handleStart(e.touches[0].clientX, e.touches[0].clientY));
        document.addEventListener('touchmove', e => handleMove(e.touches[0].clientX, e.touches[0].clientY));
        document.addEventListener('touchend', handleEnd);

        // --- 5. MAIN ANIMATION LOOP ---
        function animate(time) {
            if (!isFlipped) {
                
                // Mode A: Auto Spinning
                if (isAutoSpinning) {
                    const elapsed = time - spinStartTime;
                    const progress = Math.min(elapsed / spinDuration, 1);
                    const ease = easeInOutCubic(progress);

                    // 720 degrees = 2 full rotations
                    currentX = spinStartAngle + (720 * ease);
                    
                    // Decay Y axis tilt back to 0 for a cleaner spin
                    currentY = currentY * (1 - ease); 

                    if (progress >= 1) {
                        isAutoSpinning = false;
                        // Ensure we land on a clean number to prevent float jitter
                        currentX = currentX % 360; 
                    }
                } 
                // Mode B: Physics/Momentum
                else if (!isDragging) {
                    currentX += velX;
                    currentY += velY;
                    velX *= 0.95; // Friction
                    velY *= 0.95;
                }

                // Apply Transform
                cardWrapper.style.transform = `rotateY(${currentX}deg) rotateX(${currentY}deg)`;
            }
            requestAnimationFrame(animate);
        }
        
        // Start Loop
        requestAnimationFrame(animate);

        // --- 6. TIMERS ---
        // Load initial spin after 500ms
        window.addEventListener('load', () => {
            setTimeout(triggerSpin, 500);
            // Repeat every 10 seconds
            setInterval(triggerSpin, 10000);
        });

    </script>
</body>
</html>
